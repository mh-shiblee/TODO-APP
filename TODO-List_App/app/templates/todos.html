{% extends 'base.html' %} {% block title %}My Todos - Todo App{% endblock %} {%
block content %}
<!-- Stats Cards -->
<div class="row mb-4">
  <div class="col-md-3 col-6 mb-2">
    <div class="stat-card bg-primary text-white">
      <div class="stat-number">{{ stats.total }}</div>
      <div>Total</div>
    </div>
  </div>
  <div class="col-md-3 col-6 mb-2">
    <div class="stat-card bg-danger text-white">
      <div class="stat-number">{{ stats.incomplete }}</div>
      <div>Incomplete</div>
    </div>
  </div>
  <div class="col-md-3 col-6 mb-2">
    <div class="stat-card bg-warning text-dark">
      <div class="stat-number">{{ stats.in_progress }}</div>
      <div>In Progress</div>
    </div>
  </div>
  <div class="col-md-3 col-6 mb-2">
    <div class="stat-card bg-success text-white">
      <div class="stat-number">{{ stats.complete }}</div>
      <div>Complete</div>
    </div>
  </div>
</div>

<!-- Header & Add Button -->
<div class="d-flex justify-content-between align-items-center mb-4">
  <h2><i class="bi bi-list-task"></i> My Todo List</h2>
  <a href="{{ url_for('add_todo') }}" class="btn btn-success">
    <i class="bi bi-plus-circle"></i> Add New Todo
  </a>
</div>

<!-- Filter Buttons -->
<div class="mb-4">
  <div class="btn-group" role="group">
    <a
      href="{{ url_for('todos', status='all') }}"
      class="btn btn-{{ 'primary' if current_filter == 'all' else 'outline-primary' }}"
    >
      All
    </a>
    <a
      href="{{ url_for('todos', status='incomplete') }}"
      class="btn btn-{{ 'danger' if current_filter == 'incomplete' else 'outline-danger' }}"
    >
      Incomplete
    </a>
    <a
      href="{{ url_for('todos', status='in_progress') }}"
      class="btn btn-{{ 'warning' if current_filter == 'in_progress' else 'outline-warning' }}"
    >
      In Progress
    </a>
    <a
      href="{{ url_for('todos', status='complete') }}"
      class="btn btn-{{ 'success' if current_filter == 'complete' else 'outline-success' }}"
    >
      Complete
    </a>
  </div>
</div>

<!-- Todo List -->
{% if todos %}
<div class="row">
  {% for todo in todos %}
  <div class="col-lg-6 mb-3">
    <div class="card status-{{ todo.status }}">
      <div class="card-body">
        <!-- Title & Status Badge -->
        <div class="d-flex justify-content-between align-items-start mb-2">
          <h5
            class="card-title mb-0 {% if todo.status == 'complete' %}text-decoration-line-through text-muted{% endif %}"
          >
            {{ todo.title }}
          </h5>
          <span
            class="badge {% if todo.status == 'complete' %}bg-success {% elif todo.status == 'in_progress' %}bg-warning text-dark {% else %}bg-danger{% endif %}"
          >
            {% if todo.status == 'complete' %}‚úÖ{% elif todo.status ==
            'in_progress' %}üîÑ{% else %}‚ùå{% endif %} {{
            todo.status.replace('_', ' ').title() }}
          </span>
        </div>

        <!-- Description -->
        {% if todo.description %}
        <p class="todo-description mb-2">
          <i class="bi bi-chat-left-text"></i> {{ todo.description }}
        </p>
        {% endif %}

        <!-- Date -->
        <small class="text-muted">
          <i class="bi bi-calendar"></i> {{ todo.created_at.strftime('%b %d, %Y
          at %I:%M %p') }}
        </small>

        <hr />

        <!-- Quick Status Buttons -->
        <div class="mb-2">
          <small class="text-muted me-2">Quick Status:</small>
          <div class="btn-group btn-group-sm">
            <a
              href="{{ url_for('update_status', id=todo.id, status='incomplete') }}"
              class="btn {% if todo.status == 'incomplete' %}btn-danger{% else %}btn-outline-danger{% endif %}"
              title="Mark Incomplete"
            >
              ‚ùå
            </a>
            <a
              href="{{ url_for('update_status', id=todo.id, status='in_progress') }}"
              class="btn {% if todo.status == 'in_progress' %}btn-warning{% else %}btn-outline-warning{% endif %}"
              title="Mark In Progress"
            >
              üîÑ
            </a>
            <a
              href="{{ url_for('update_status', id=todo.id, status='complete') }}"
              class="btn {% if todo.status == 'complete' %}btn-success{% else %}btn-outline-success{% endif %}"
              title="Mark Complete"
            >
              ‚úÖ
            </a>
          </div>
        </div>

        <!-- Action Buttons -->
        <div class="d-flex gap-2">
          <a
            href="{{ url_for('edit_todo', id=todo.id) }}"
            class="btn btn-sm btn-primary"
          >
            <i class="bi bi-pencil"></i> Edit
          </a>
          <a
            href="{{ url_for('delete_todo', id=todo.id) }}"
            class="btn btn-sm btn-danger"
            onclick="
              return confirm('Are you sure you want to delete this todo?');
            "
          >
            <i class="bi bi-trash"></i> Delete
          </a>
        </div>
      </div>
    </div>
  </div>
  {% endfor %}
</div>
{% else %}
<div class="text-center py-5">
  <i class="bi bi-inbox display-1 text-muted"></i>
  <h4 class="mt-3 text-muted">No todos found!</h4>
  <p class="text-muted">Start by adding your first todo.</p>
  <a href="{{ url_for('add_todo') }}" class="btn btn-success">
    <i class="bi bi-plus-circle"></i> Add Your First Todo
  </a>
</div>
{% endif %} {% endblock %}
